<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Canvas Course Page Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #f0f8ff, #e6f7ff);
      color: #333;
      transition: background 0.5s;
    }
    header {
      background: #004080;
      color: white;
      padding: 0.5em;
      position: sticky;
      top: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    header img {
      max-height: 40px;
      margin-right: 10px;
    }
    main {
      padding: 2em;
      max-width: 1000px;
      margin: auto;
    }
    label {
      display: block;
      margin-top: 1em;
      font-weight: bold;
    }
    input[type="text"], textarea, select {
      width: 100%;
      padding: 0.5em;
      margin-top: 0.5em;
      transition: all 0.3s ease;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    input[type="text"]:hover, textarea:hover, select:hover {
      border-color: #0066cc;
      box-shadow: 0 0 5px rgba(0, 102, 204, 0.4);
    }
    button {
      margin-top: 1em;
      padding: 0.7em 1.5em;
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.3s, transform 0.2s;
    }
    button:hover {
      background: #004080;
      transform: scale(1.05);
    }
    #output {
      margin-top: 2em;
      white-space: pre-wrap;
      background: #f9f9f9;
      padding: 1em;
      border: 1px solid #ccc;
    }
    iframe.preview {
      margin-top: 2em;
      width: 100%;
      height: 400px;
      border: 2px solid #0066cc;
    }
    footer {
      text-align: center;
      padding: 1em;
      background: #f0f0f0;
      margin-top: 3em;
    }
    .color-scheme {
      margin-top: 1em;
    }
  </style>
</head>
<body>
  <header>
    <img id="headerImgPreview" src="" alt="Header Image Preview" style="display:none;">
    <h1>Canvas Course Page Generator</h1>
  </header>
  <main>
    <p>Fill in the information below to generate an HTML course homepage for Canvas. You can embed a webpage and include a backup link. Customize color theme, heading text, and effects below.</p>

    <label for="colorTheme">Select a Color Scheme:</label>
    <select id="colorTheme" class="color-scheme" onchange="changeColorScheme()">
      <option value="default">Blue Sky</option>
      <option value="sunset">Sunset Orange</option>
      <option value="forest">Forest Green</option>
      <option value="night">Night Mode</option>
    </select>

    <label for="sparkle">Add Effects:</label>
    <select id="sparkle">
      <option value="none">None</option>
      <option value="stars">Stars and Sparkles</option>
      <option value="paint">Paint Splats and Splashes</option>
      <option value="water">Water and Ripples</option>
    </select>

    <label for="headerImg">Header Image URL (optional):</label>
    <input type="text" id="headerImg" oninput="previewHeaderImage()" />

    <label for="courseTitle">Course Title:</label>
    <input type="text" id="courseTitle" />

    <label for="embedUrl">Webpage to Embed:</label>
    <input type="text" id="embedUrl" />

    <button onclick="generateHTML()">Generate HTML</button>
    <button onclick="downloadHTML()">Download HTML File</button>

    <div id="output"></div>
    <iframe id="previewFrame" class="preview" style="display:none;"></iframe>
  </main>
  <footer>
    &copy; B. Watts 2025
  </footer>

  <script>
    function get(id) {
      return document.getElementById(id).value.trim();
    }

    function previewHeaderImage() {
      const url = get("headerImg");
      const img = document.getElementById("headerImgPreview");
      if (url) {
        img.src = url;
        img.style.display = "block";
      } else {
        img.style.display = "none";
      }
    }

    function changeColorScheme() {
      const scheme = get("colorTheme");
      const body = document.body;
      switch (scheme) {
        case "sunset":
          body.style.background = "linear-gradient(to right, #ff9966, #ff5e62)";
          break;
        case "forest":
          body.style.background = "linear-gradient(to right, #a8e063, #56ab2f)";
          break;
        case "night":
          body.style.background = "linear-gradient(to right, #232526, #414345)";
          body.style.color = "#f5f5f5";
          break;
        default:
          body.style.background = "linear-gradient(to bottom right, #f0f8ff, #e6f7ff)";
          body.style.color = "#333";
      }
    }

    function getEffectCSS(effect) {
      switch (effect) {
        case "stars":
          return `<style>body::after { content: ''; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-image: url('https://i.imgur.com/5FzJzyf.gif'); background-size: cover; opacity: 0.3; pointer-events: none; }</style>`;
        case "paint":
          return `<style>body::after { content: ''; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-image: url('https://i.imgur.com/VevJrjH.png'); background-size: contain; background-repeat: repeat; opacity: 0.2; pointer-events: none; }</style>`;
        case "water":
          return `<style>body::after { content: ''; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-image: url('https://i.imgur.com/SZ0K5cL.gif'); background-size: cover; opacity: 0.2; pointer-events: none; }</style>`;
        default:
          return "";
      }
    }

    function generateHTML() {
      const headerImg = get("headerImg");
      const courseTitle = get("courseTitle");
      const embedUrl = get("embedUrl");
      const sparkle = get("sparkle");

      let html = `
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>${courseTitle}</title>
        ${getEffectCSS(sparkle)}
      </head>
      <body>
        ${headerImg ? `<img src="${headerImg}" alt="Header Image" style="max-width: 100%;">` : ""}
        <h2>${courseTitle}</h2>
        ${embedUrl ? `<details><summary><strong>Embedded Webpage</strong></summary>
        <iframe src="${embedUrl}" width="100%" height="300px" style="border:none;"></iframe>
        <p><a href="${embedUrl}" target="_blank"><button>Open in New Window</button></a></p>
        </details>` : ""}
      </body>
      </html>
      `;

      document.getElementById("output").innerText = html;
      const preview = document.getElementById("previewFrame");
      preview.style.display = "block";
      preview.srcdoc = html;
    }

    function downloadHTML() {
      const blob = new Blob([document.getElementById("output").innerText], { type: 'text/html' });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "canvas_course_page.html";
      link.click();
    }
  </script>
</body>
</html>
